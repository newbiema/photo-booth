<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modern Photo Booth Experience</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #8a4af3;
            --secondary: #ff69b4;
            --accent: #ffb6c1;
            --dark: #5a189a;
            --light: #ffebf2;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #ffebf2, #e0c3fc);
            color: #5a189a;
            min-height: 100vh;
            padding: 20px;
        }
        
        .fun-title {
            font-family: 'Pacifico', cursive;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        
        video {
            transform: scaleX(-1);
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        
        .camera-container {
            position: relative;
            overflow: hidden;
            border-radius: 16px;
            box-shadow: 0 15px 35px rgba(138, 74, 243, 0.2);
        }
        
        .countdown {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 182, 193, 0.85);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 120px;
            color: white;
            font-weight: bold;
            z-index: 10;
            opacity: 0;
            transition: opacity 0.3s;
            border-radius: 16px;
        }
        
        .countdown.active {
            opacity: 1;
        }
        
        .frame-border {
            border-width: 12px;
            border-style: solid;
            border-radius: 12px;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .frame-border:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .photo-strip {
            background: linear-gradient(to bottom, var(--accent), var(--light));
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin: 20px 0;
        }
        
        .filter-btn {
            transition: all 0.2s ease;
        }
        
        .filter-btn:hover, .filter-btn.active {
            transform: scale(1.1);
            box-shadow: 0 0 15px rgba(255, 105, 180, 0.5);
        }
        
        .btn {
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(138, 74, 243, 0.3);
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 14px rgba(138, 74, 243, 0.4);
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .header-gradient {
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .feature-card {
            transition: all 0.3s ease;
            border-radius: 16px;
            overflow: hidden;
        }
        
        .feature-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(138, 74, 243, 0.3);
        }
        
        .footer {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            border-top: 1px solid rgba(255, 182, 193, 0.5);
        }
    </style>
</head>
<body class="flex flex-col items-center min-h-screen">
    <header class="w-full max-w-6xl text-center py-8">
        <h1 class="fun-title text-5xl md:text-6xl header-gradient mb-2">
            <i class="fas fa-camera-retro mr-3"></i>Modern Photo Booth
        </h1>
        <p class="text-xl text-purple-700 max-w-2xl mx-auto">
            Capture special moments with style! Created with ❤️ by Evan Ni Bossssss
        </p>
    </header>

    <main class="w-full max-w-6xl flex flex-col items-center">
        <section class="w-full grid grid-cols-1 lg:grid-cols-2 gap-12 items-start">
            <!-- Camera Section -->
            <div class="bg-white/80 backdrop-blur-sm p-8 rounded-2xl shadow-xl">
                <h2 class="text-3xl font-bold text-purple-800 mb-6 flex items-center">
                    <i class="fas fa-camera mr-3 text-pink-500"></i>Capture Your Moments
                </h2>
                
                <div class="camera-container">
                    <video id="camera" autoplay class="w-full h-auto aspect-video"></video>
                    <div id="countdown" class="countdown">3</div>
                </div>
                
                <div class="mt-6 grid grid-cols-2 gap-4">
                    <div>
                        <label for="photoCount" class="block font-medium mb-2 text-purple-700">
                            <i class="fas fa-images mr-2"></i>Number of Photos
                        </label>
                        <div class="flex items-center">
                            <button id="decreaseCount" class="bg-purple-500 text-white p-2 rounded-l-lg">
                                <i class="fas fa-minus"></i>
                            </button>
                            <input type="number" id="photoCount" min="1" max="5" value="3" class="w-full border border-purple-300 p-2 text-center text-purple-700 font-bold">
                            <button id="increaseCount" class="bg-purple-500 text-white p-2 rounded-r-lg">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div>
                        <label for="frameColor" class="block font-medium mb-2 text-purple-700">
                            <i class="fas fa-palette mr-2"></i>Frame Color
                        </label>
                        <div class="flex items-center">
                            <input type="color" id="frameColor" value="#ff69b4" class="w-10 h-10 border-0 cursor-pointer">
                            <span class="ml-2 text-purple-700 font-medium" id="colorValue">#ff69b4</span>
                        </div>
                    </div>
                </div>
                
                <div class="mt-6">
                    <label class="block font-medium mb-2 text-purple-700">
                        <i class="fas fa-magic mr-2"></i>Photo Filters
                    </label>
                    <div class="flex flex-wrap gap-2 justify-center">
                        <button class="filter-btn active" data-filter="normal">
                            <i class="fas fa-sun mr-1"></i> Normal
                        </button>
                        <button class="filter-btn" data-filter="grayscale">
                            <i class="fas fa-moon mr-1"></i> Grayscale
                        </button>
                        <button class="filter-btn" data-filter="sepia">
                            <i class="fas fa-feather mr-1"></i> Sepia
                        </button>
                        <button class="filter-btn" data-filter="vintage">
                            <i class="fas fa-camera-retro mr-1"></i> Vintage
                        </button>
                        <button class="filter-btn" data-filter="invert">
                            <i class="fas fa-adjust mr-1"></i> Invert
                        </button>
                    </div>
                </div>
                
                <button id="startCapture" class="btn w-full mt-8 bg-gradient-to-r from-purple-500 to-pink-500 px-6 py-4 rounded-xl font-bold text-white pulse">
                    <i class="fas fa-play-circle mr-2"></i>Start Photo Session
                </button>
                
                <canvas id="canvas" class="hidden"></canvas>
            </div>
            
            <!-- Gallery Section -->
            <div class="bg-white/80 backdrop-blur-sm p-8 rounded-2xl shadow-xl">
                <h2 class="text-3xl font-bold text-purple-800 mb-6 flex items-center">
                    <i class="fas fa-images mr-3 text-pink-500"></i>Your Photo Strip
                </h2>
                
                <div id="photoStrip" class="photo-strip grid grid-cols-3 gap-4">
                    <div class="bg-gray-200 border-2 border-dashed rounded-xl w-full aspect-[3/4] flex items-center justify-center text-gray-500">
                        <i class="fas fa-camera text-3xl"></i>
                    </div>
                    <div class="bg-gray-200 border-2 border-dashed rounded-xl w-full aspect-[3/4] flex items-center justify-center text-gray-500">
                        <i class="fas fa-camera text-3xl"></i>
                    </div>
                    <div class="bg-gray-200 border-2 border-dashed rounded-xl w-full aspect-[3/4] flex items-center justify-center text-gray-500">
                        <i class="fas fa-camera text-3xl"></i>
                    </div>
                </div>
                
                <div class="mt-6 flex flex-wrap gap-4">
                    <a id="downloadStrip" class="btn flex-1 bg-gradient-to-r from-green-500 to-teal-500 px-6 py-3 rounded-lg font-bold text-white text-center">
                        <i class="fas fa-download mr-2"></i>Download Strip
                    </a>
                    <button id="shareBtn" class="btn flex-1 bg-gradient-to-r from-blue-500 to-indigo-500 px-6 py-3 rounded-lg font-bold text-white">
                        <i class="fas fa-share-alt mr-2"></i>Share
                    </button>
                </div>
                
                <div class="mt-8">
                    <h3 class="text-xl font-bold text-purple-800 mb-4 flex items-center">
                        <i class="fas fa-sparkles mr-2 text-pink-500"></i>Photo Booth Features
                    </h3>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="feature-card bg-gradient-to-br from-purple-100 to-pink-100 p-4 rounded-lg border border-purple-200">
                            <div class="text-purple-700 mb-2">
                                <i class="fas fa-palette text-2xl"></i>
                            </div>
                            <h4 class="font-bold text-purple-800">Custom Frames</h4>
                            <p class="text-sm text-purple-600">Choose from unlimited frame colors</p>
                        </div>
                        <div class="feature-card bg-gradient-to-br from-purple-100 to-pink-100 p-4 rounded-lg border border-purple-200">
                            <div class="text-purple-700 mb-2">
                                <i class="fas fa-filter text-2xl"></i>
                            </div>
                            <h4 class="font-bold text-purple-800">Creative Filters</h4>
                            <p class="text-sm text-purple-600">Apply artistic filters to your photos</p>
                        </div>
                        <div class="feature-card bg-gradient-to-br from-purple-100 to-pink-100 p-4 rounded-lg border border-purple-200">
                            <div class="text-purple-700 mb-2">
                                <i class="fas fa-stopwatch text-2xl"></i>
                            </div>
                            <h4 class="font-bold text-purple-800">Countdown Timer</h4>
                            <p class="text-sm text-purple-600">Get ready with our 3-2-1 timer</p>
                        </div>
                        <div class="feature-card bg-gradient-to-br from-purple-100 to-pink-100 p-4 rounded-lg border border-purple-200">
                            <div class="text-purple-700 mb-2">
                                <i class="fas fa-cloud-download-alt text-2xl"></i>
                            </div>
                            <h4 class="font-bold text-purple-800">Easy Sharing</h4>
                            <p class="text-sm text-purple-600">Download and share your creations</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>
    
    <footer class="footer w-full max-w-6xl mt-12 p-6 rounded-2xl text-center">
        <p class="text-purple-700">
            <i class="fas fa-code mr-2"></i>Built with modern web technologies by Evan Ni Bossssss
        </p>
        <div class="flex justify-center mt-3 space-x-4">
            <a href="#" class="text-purple-600 hover:text-purple-800">
                <i class="fab fa-facebook fa-lg"></i>
            </a>
            <a href="#" class="text-purple-600 hover:text-purple-800">
                <i class="fab fa-twitter fa-lg"></i>
            </a>
            <a href="#" class="text-purple-600 hover:text-purple-800">
                <i class="fab fa-instagram fa-lg"></i>
            </a>
            <a href="#" class="text-purple-600 hover:text-purple-800">
                <i class="fab fa-github fa-lg"></i>
            </a>
        </div>
    </footer>

    <script>
        // Elements
        const video = document.getElementById('camera');
        const canvas = document.getElementById('canvas');
        const startCaptureButton = document.getElementById('startCapture');
        const photoCountInput = document.getElementById('photoCount');
        const frameColorInput = document.getElementById('frameColor');
        const colorValue = document.getElementById('colorValue');
        const photoStrip = document.getElementById('photoStrip');
        const downloadButton = document.getElementById('downloadStrip');
        const shareBtn = document.getElementById('shareBtn');
        const countdownEl = document.getElementById('countdown');
        const decreaseBtn = document.getElementById('decreaseCount');
        const increaseBtn = document.getElementById('increaseCount');
        const filterButtons = document.querySelectorAll('.filter-btn');
        
        // Variables
        let currentFilter = 'normal';
        let isCapturing = false;
        
        // Camera setup
        navigator.mediaDevices.getUserMedia({ video: true })
            .then(stream => {
                video.srcObject = stream;
            })
            .catch(error => {
                console.error("Error accessing camera:", error);
                photoStrip.innerHTML = `
                    <div class="col-span-3 text-center p-8">
                        <i class="fas fa-exclamation-triangle text-4xl text-red-500 mb-4"></i>
                        <h3 class="text-xl font-bold text-purple-800">Camera Error</h3>
                        <p class="text-purple-600">Please allow camera access to use the photo booth</p>
                    </div>
                `;
            });
        
        // Update color value display
        frameColorInput.addEventListener('input', () => {
            colorValue.textContent = frameColorInput.value;
        });
        
        // Photo count controls
        decreaseBtn.addEventListener('click', () => {
            if (photoCountInput.value > 1) {
                photoCountInput.value = parseInt(photoCountInput.value) - 1;
            }
        });
        
        increaseBtn.addEventListener('click', () => {
            if (photoCountInput.value < 5) {
                photoCountInput.value = parseInt(photoCountInput.value) + 1;
            }
        });
        
        // Filter selection
        filterButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                filterButtons.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentFilter = btn.dataset.filter;
            });
        });
        
        // Start capture process
        startCaptureButton.addEventListener('click', () => {
            if (isCapturing) return;
            
            const numPhotos = parseInt(photoCountInput.value);
            const frameColor = frameColorInput.value;
            
            // Reset photo strip
            photoStrip.innerHTML = '';
            for (let i = 0; i < numPhotos; i++) {
                photoStrip.innerHTML += `
                    <div class="flex items-center justify-center">
                        <div class="bg-gray-200 border-2 border-dashed rounded-xl w-full aspect-[3/4] flex items-center justify-center text-gray-500">
                            <i class="fas fa-spinner fa-spin text-2xl"></i>
                        </div>
                    </div>
                `;
            }
            
            startCaptureButton.disabled = true;
            startCaptureButton.textContent = 'Capturing...';
            startCaptureButton.classList.remove('pulse');
            startCaptureButton.classList.add('opacity-70');
            
            capturePhotos(numPhotos, frameColor);
        });
        
        // Main photo capture function
        function capturePhotos(numPhotos, frameColor) {
            isCapturing = true;
            const images = [];
            let count = numPhotos;
            
            function takePhoto() {
                if (count > 0) {
                    // Show countdown
                    let countdown = 3;
                    countdownEl.textContent = countdown;
                    countdownEl.classList.add('active');
                    
                    const countdownInterval = setInterval(() => {
                        countdown--;
                        countdownEl.textContent = countdown;
                        
                        if (countdown <= 0) {
                            clearInterval(countdownInterval);
                            countdownEl.classList.remove('active');
                            
                            // Capture the photo
                            setTimeout(() => {
                                const context = canvas.getContext('2d');
                                canvas.width = video.videoWidth;
                                canvas.height = video.videoHeight;
                                
                                // Apply horizontal flip
                                context.save();
                                context.scale(-1, 1);
                                context.drawImage(video, -canvas.width, 0, canvas.width, canvas.height);
                                context.restore();
                                
                                // Apply filter
                                applyFilter(context, currentFilter);
                                
                                // Apply frame
                                applyFrame(context, frameColor);
                                
                                // Create image
                                const img = document.createElement('img');
                                img.src = canvas.toDataURL();
                                img.classList.add('w-full', 'h-full', 'object-cover', 'frame-border');
                                img.style.borderColor = frameColor;
                                
                                // Add to photo strip
                                const photoContainer = photoStrip.children[numPhotos - count];
                                photoContainer.innerHTML = '';
                                photoContainer.appendChild(img);
                                
                                images.push(img.src);
                                count--;
                                
                                // Take next photo
                                setTimeout(takePhoto, 1000);
                            }, 300);
                        }
                    }, 1000);
                } else {
                    // Create photo strip
                    createPhotoStrip(images, frameColor);
                    isCapturing = false;
                    startCaptureButton.disabled = false;
                    startCaptureButton.innerHTML = '<i class="fas fa-play-circle mr-2"></i>Start Photo Session';
                    startCaptureButton.classList.remove('opacity-70');
                    startCaptureButton.classList.add('pulse');
                }
            }
            
            takePhoto();
        }
        
        // Apply filter to the image
        function applyFilter(context, filter) {
            switch(filter) {
                case 'grayscale':
                    const imageData = context.getImageData(0, 0, canvas.width, canvas.height);
                    const data = imageData.data;
                    for (let i = 0; i < data.length; i += 4) {
                        const avg = (data[i] + data[i + 1] + data[i + 2]) / 3;
                        data[i] = avg;
                        data[i + 1] = avg;
                        data[i + 2] = avg;
                    }
                    context.putImageData(imageData, 0, 0);
                    break;
                case 'sepia':
                    context.filter = 'sepia(100%)';
                    break;
                case 'vintage':
                    context.filter = 'contrast(1.1) brightness(1.1) saturate(1.3) sepia(0.3)';
                    break;
                case 'invert':
                    context.filter = 'invert(100%)';
                    break;
                default:
                    context.filter = 'none';
            }
        }
        
        // Apply frame to the image
        function applyFrame(context, color) {
            context.lineWidth = 30;
            context.strokeStyle = color;
            context.strokeRect(0, 0, canvas.width, canvas.height);
        }
        
        // Create photo strip
        function createPhotoStrip(images, frameColor) {
            const stripCanvas = document.createElement('canvas');
            const stripContext = stripCanvas.getContext('2d');
            const imgHeight = canvas.height;
            const stripHeight = imgHeight * images.length + 80;
            stripCanvas.width = canvas.width + 60;
            stripCanvas.height = stripHeight;
            
            // Background with frame color
            stripContext.fillStyle = frameColor;
            stripContext.fillRect(0, 0, stripCanvas.width, stripCanvas.height);
            
            // Draw images
            let imagesLoaded = 0;
            images.forEach((src, index) => {
                const img = new Image();
                img.src = src;
                img.onload = () => {
                    stripContext.drawImage(img, 30, 40 + index * imgHeight, canvas.width, imgHeight);
                    imagesLoaded++;
                    
                    if (imagesLoaded === images.length) {
                        // Add footer with date
                        stripContext.fillStyle = 'rgba(90, 24, 154, 0.8)';
                        stripContext.fillRect(0, stripCanvas.height - 50, stripCanvas.width, 50);
                        
                        stripContext.font = 'bold 20px Poppins';
                        stripContext.fillStyle = '#ffffff';
                        stripContext.textAlign = 'center';
                        stripContext.fillText('Modern Photo Booth • ' + new Date().toLocaleString(), stripCanvas.width / 2, stripCanvas.height - 15);
                        
                        // Add decorative elements
                        stripContext.fillStyle = '#ffb6c1';
                        for (let i = 0; i < 8; i++) {
                            stripContext.beginPath();
                            stripContext.arc(30 + i * 70, 20, 8, 0, Math.PI * 2);
                            stripContext.fill();
                        }
                        
                        // Set download URL
                        downloadButton.href = stripCanvas.toDataURL();
                        downloadButton.classList.remove('bg-gray-400');
                        downloadButton.classList.add('cursor-pointer');
                        
                        // Enable share button
                        shareBtn.onclick = () => {
                            alert('Sharing your photo strip! In a real app, this would open sharing options.');
                        };
                    }
                };
            });
        }
        
        // Download button handler
        downloadButton.addEventListener('click', (e) => {
            if (!downloadButton.href) {
                e.preventDefault();
                alert('Please create a photo strip first!');
            }
        });
        
        // Initialize
        window.addEventListener('DOMContentLoaded', () => {
            // Set initial color display
            colorValue.textContent = frameColorInput.value;
        });
    </script>
</body>
</html>